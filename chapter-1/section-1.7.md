## 1.7 선택이 아닌 필수, 타입스크립트

### 1.7.1 타입스크립트란?

자바스크립트에 타입을 도입한 것이 타입스크립트이다. 자바스크립트 같은 동적 타입 언어는 대부분 에러를 코드를 실행해야만 판단할 수 있다. 이를 보완하기 위해 컴파일 단에서 파악할 수 있는 타입스크립트는 선택이 아닌 필수에 가깝다.

### 1.7.2 리액트 코드를 효과적으로 작성하기 위한 타입스크립트 활용법

#### 📌 any 대신 unknown을 사용하자

`any`는 사실상 타입스크립트의 의미가 없고 타입 검사를 하지 않는다. `unknown`을 사용할 때 주의점은, 해당 타입의 값은 타입 가드로 타입을 좁혀줘야 한다.

#### 📌 타입 가드를 적극 활용하자

##### instanceof

특정 클래스의 인스턴스인지 확인할 수 있는 연산자

##### typeof

특정 요소의 자료형을 확인하는데 사용된다.

##### in

프로퍼티 in object로 사용되는데, 객체에 키가 존재하는지 확인하는 용도로 사용된다.

#### 📌 제네릭

단일 타입이 아닌 다양한 타입에 대응할 수 있도록 도와주는 도구이다.

```ts
function firstList<T>(list: T[]): [T, T] {
  return [list[0], list[list.length - 1]];
}

const [first, last] = firstList([1, 2, 3, 4, 5]);
first; // number
last; // number
```

위 예제는 타입 추론을 통해 타입이 자동으로 적용된 모습을 볼 수 있다.

#### 📌 인덱스 시그니처

객체의 키를 정의하는 방식이다.

```ts
type Hello = {
  [key: string]: string;
};

const hello: Hello = {
  hello: "hello",
  hi: "hi",
};
```

위 예제에서는 key가 string이므로 존재하지 않는 키도 undefined로 출력할 수 있어 문제가 있다. 이를 동적으로 하기보다는 조금 더 좁혀주는 방식을 사용하는 것이 좋다.

```ts
type Hello = Record<"hello" | "hi", string>;

type Hello = { [key in "hello" | "hi"]: string };
```

### 1.7.3 타입스크립트 전환 가이드

#### 📌 tsconfig.json 먼저 작성하기

기본적으로 타입스크립트를 작성할 수 있는 환경을 만드는 과정이다.

```ts
{
  "compilerOptions": {
    "outDir": "./dist",
    "allowJs": true,
    "target": "es6"
  }
  "include": ["./src/**/*"]
}
```

##### outDir

.ts나 .js가 만들어진 결과를 넣어두는 폴더이다. 사용하면 outDir로 지정된 폴더로 변환 후 넘어간다.

##### allowJs

js 파일을 허용할 것 인지의 여부다.

##### target

결과물이 될 자바스크립트 버전을 지정

##### include

트랜스파일할 자바스크립트와 타입스크립트 파일을 지정

#### 📌 JSDoc과 @ts-check를 활용해 점진적으로 전환하기

타입스크립트로 전환하지 않고 타입을 체크하는 방법이다.

#### 📌 타입 기반 라이브러리 사용을 위해 @types 모듈 설치하기

라이브러리를 설치할 때, `@types/react` 형식으로 `@types`를 같이 설치해주면 라이브러리를 정상적으로 사용이 가능하다.

#### 📌 파일 단위로 조금씩 전환하기

한 번에 전환하기 보다는 단계적으로 파일 단위로 전환하는 것도 하나의 방법이다.
